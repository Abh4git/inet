[General]
network = MultidropNetwork
sim-time-limit = 1ms

# network configuration
*.numNodes = ${numNodes=1..10}

*.*.ethernet.hasSocketSupport = true

# application configuration
*.node[*].typename = "EthernetPlcaNode"
*.node[*].numApps = 2
*.node[*].app[0].typename = "EthernetSourceApp"
*.node[*].app[0].io.interface = "eth0"
*.node[*].app[0].io.remoteAddress = "0A:AA:00:00:00:01"
*.node[*].app[0].source.productionInterval = ${numNodes} * ${packetInterval=50,100,200,300,400,500,600,700,800,900,1000}us
#*.node[*].app[0].source.initialProductionOffset = uniform(0us, ${packetInterval}us)
*.node[*].app[0].source.packetLength = 46B # minimum Ethernet payload size
*.node[*].app[1].typename = "EthernetSinkApp"
*.node[*].app[1].io.steal = true
*.node[*].app[1].io.interface = "eth0"
*.node[0].app[1].io.localAddress = "0A:AA:00:00:00:02"
*.node[1].app[1].io.localAddress = "0A:AA:00:00:00:03"
*.node[2].app[1].io.localAddress = "0A:AA:00:00:00:04"
*.node[3].app[1].io.localAddress = "0A:AA:00:00:00:05"
*.node[4].app[1].io.localAddress = "0A:AA:00:00:00:06"
*.node[5].app[1].io.localAddress = "0A:AA:00:00:00:07"
*.node[6].app[1].io.localAddress = "0A:AA:00:00:00:08"
*.node[7].app[1].io.localAddress = "0A:AA:00:00:00:09"
*.node[8].app[1].io.localAddress = "0A:AA:00:00:00:0A"
*.node[9].app[1].io.localAddress = "0A:AA:00:00:00:0B"

*.node[*].eth.queue.typename = "DropHeadQueue"
#*.node[*].eth.queue.packetCapacity = 1
*.node[*].eth.queue.dataCapacity = 16kB

*.controller.typename = "EthernetPlcaNode"
*.controller.numApps = 1 + ${numNodes}
*.controller.app[0].typename = "EthernetSinkApp"
*.controller.app[0].io.steal = true
*.controller.app[0].io.interface = "eth0"
*.controller.app[0].io.localAddress = "0A:AA:00:00:00:01"
*.controller.app[*].typename = "EthernetSourceApp"
*.controller.app[*].io.interface = "eth0"
*.controller.app[1].io.remoteAddress = "0A:AA:00:00:00:02"
*.controller.app[2].io.remoteAddress = "0A:AA:00:00:00:03"
*.controller.app[3].io.remoteAddress = "0A:AA:00:00:00:04"
*.controller.app[4].io.remoteAddress = "0A:AA:00:00:00:05"
*.controller.app[5].io.remoteAddress = "0A:AA:00:00:00:06"
*.controller.app[6].io.remoteAddress = "0A:AA:00:00:00:07"
*.controller.app[7].io.remoteAddress = "0A:AA:00:00:00:08"
*.controller.app[8].io.remoteAddress = "0A:AA:00:00:00:09"
*.controller.app[9].io.remoteAddress = "0A:AA:00:00:00:0A"
*.controller.app[10].io.remoteAddress = "0A:AA:00:00:00:0B"
*.controller.app[*].source.productionInterval = ${numNodes} * ${packetInterval}us
*.controller.app[*].source.packetLength = 46B # minimum Ethernet payload size

# SPI configuration
*.*.spi.typename = "Spi2"
*.*.spi.speed = 10MHz
#*.node[*].spi.queue.typename = "DropHeadQueue"
#*.node[*].spi.queue.dataCapacity = 16kB

# encryption configuration
*.*.encryption.delay = 10us

# switch forwarding delay
*.switch.bridging.typename = "BridgingLayer"
*.switch.bridging.directionReverser.delayer.typename = "PacketDelayer"
*.switch.bridging.directionReverser.delayer.delay = 0us
*.switch.bridging.directionReverser.delayer.bitrate = inf bps

# network interface configuration
*.switch.eth[0].typename = "EthernetPlcaInterface"

# PLCA configuration
*.node[*].eth.plca.max_bc = 3
